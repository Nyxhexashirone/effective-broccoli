This file is a merged representation of the entire codebase, combined into a single document by Repomix.

<file_summary>
This section contains a summary of this file.

<purpose>
This file contains a packed representation of the entire repository's contents.
It is designed to be easily consumable by AI systems for analysis, code review,
or other automated processes.
</purpose>

<file_format>
The content is organized as follows:
1. This summary section
2. Repository information
3. Directory structure
4. Repository files (if enabled)
5. Multiple file entries, each consisting of:
  - File path as an attribute
  - Full contents of the file
</file_format>

<usage_guidelines>
- This file should be treated as read-only. Any changes should be made to the
  original repository files, not this packed version.
- When processing this file, use the file path to distinguish
  between different files in the repository.
- Be aware that this file may contain sensitive information. Handle it with
  the same level of security as you would the original repository.
</usage_guidelines>

<notes>
- Some files may have been excluded based on .gitignore rules and Repomix's configuration
- Binary files are not included in this packed representation. Please refer to the Repository Structure section for a complete list of file paths, including binary files
- Files matching patterns in .gitignore are excluded
- Files matching default ignore patterns are excluded
- Files are sorted by Git change count (files with more changes are at the bottom)
</notes>

</file_summary>

<directory_structure>
.github/
  workflows/
    pages.yml
destroyer-clicker/
  public/
    vite.svg
  src/
    assets/
      react.svg
    App.css
    App.tsx
    index.css
    main.tsx
  .gitignore
  eslint.config.js
  index.html
  package.json
  README.md
  tsconfig.app.json
  tsconfig.json
  tsconfig.node.json
  vite.config.ts
src/
  components/
    achievements/
      AchievementItem.tsx
      AchievementsButton.tsx
      AchievementsPanel.tsx
  data/
    achievements.ts
    autoClick.ts
    currencies.ts
    targets.ts
    upgrades.ts
  game/
    constants.ts
    gameReducer.ts
    GameState.ts
  systems/
    achievementRewards.ts
    achievements.ts
    autoClick.ts
    bigNumbers.ts
    damage.ts
    drops.ts
    log.ts
    save.ts
    saveMapper.ts
    tick.ts
    unlocks.ts
    upgrades.ts
  types/
    Achievement.ts
    BigNumber.ts
    Currency.ts
    Target.ts
    Unlocks.ts
    Upgrade.ts
  utils/
    format.ts
  App.tsx
index.html
LICENSE.txt
package.json
</directory_structure>

<files>
This section contains the contents of the repository's files.

<file path="destroyer-clicker/public/vite.svg">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" class="iconify iconify--logos" width="31.88" height="32" preserveAspectRatio="xMidYMid meet" viewBox="0 0 256 257"><defs><linearGradient id="IconifyId1813088fe1fbc01fb466" x1="-.828%" x2="57.636%" y1="7.652%" y2="78.411%"><stop offset="0%" stop-color="#41D1FF"></stop><stop offset="100%" stop-color="#BD34FE"></stop></linearGradient><linearGradient id="IconifyId1813088fe1fbc01fb467" x1="43.376%" x2="50.316%" y1="2.242%" y2="89.03%"><stop offset="0%" stop-color="#FFEA83"></stop><stop offset="8.333%" stop-color="#FFDD35"></stop><stop offset="100%" stop-color="#FFA800"></stop></linearGradient></defs><path fill="url(#IconifyId1813088fe1fbc01fb466)" d="M255.153 37.938L134.897 252.976c-2.483 4.44-8.862 4.466-11.382.048L.875 37.958c-2.746-4.814 1.371-10.646 6.827-9.67l120.385 21.517a6.537 6.537 0 0 0 2.322-.004l117.867-21.483c5.438-.991 9.574 4.796 6.877 9.62Z"></path><path fill="url(#IconifyId1813088fe1fbc01fb467)" d="M185.432.063L96.44 17.501a3.268 3.268 0 0 0-2.634 3.014l-5.474 92.456a3.268 3.268 0 0 0 3.997 3.378l24.777-5.718c2.318-.535 4.413 1.507 3.936 3.838l-7.361 36.047c-.495 2.426 1.782 4.5 4.151 3.78l15.304-4.649c2.372-.72 4.652 1.36 4.15 3.788l-11.698 56.621c-.732 3.542 3.979 5.473 5.943 2.437l1.313-2.028l72.516-144.72c1.215-2.423-.88-5.186-3.54-4.672l-25.505 4.922c-2.396.462-4.435-1.77-3.759-4.114l16.646-57.705c.677-2.35-1.37-4.583-3.769-4.113Z"></path></svg>
</file>

<file path="destroyer-clicker/src/assets/react.svg">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" class="iconify iconify--logos" width="35.93" height="32" preserveAspectRatio="xMidYMid meet" viewBox="0 0 256 228"><path fill="#00D8FF" d="M210.483 73.824a171.49 171.49 0 0 0-8.24-2.597c.465-1.9.893-3.777 1.273-5.621c6.238-30.281 2.16-54.676-11.769-62.708c-13.355-7.7-35.196.329-57.254 19.526a171.23 171.23 0 0 0-6.375 5.848a155.866 155.866 0 0 0-4.241-3.917C100.759 3.829 77.587-4.822 63.673 3.233C50.33 10.957 46.379 33.89 51.995 62.588a170.974 170.974 0 0 0 1.892 8.48c-3.28.932-6.445 1.924-9.474 2.98C17.309 83.498 0 98.307 0 113.668c0 15.865 18.582 31.778 46.812 41.427a145.52 145.52 0 0 0 6.921 2.165a167.467 167.467 0 0 0-2.01 9.138c-5.354 28.2-1.173 50.591 12.134 58.266c13.744 7.926 36.812-.22 59.273-19.855a145.567 145.567 0 0 0 5.342-4.923a168.064 168.064 0 0 0 6.92 6.314c21.758 18.722 43.246 26.282 56.54 18.586c13.731-7.949 18.194-32.003 12.4-61.268a145.016 145.016 0 0 0-1.535-6.842c1.62-.48 3.21-.974 4.76-1.488c29.348-9.723 48.443-25.443 48.443-41.52c0-15.417-17.868-30.326-45.517-39.844Zm-6.365 70.984c-1.4.463-2.836.91-4.3 1.345c-3.24-10.257-7.612-21.163-12.963-32.432c5.106-11 9.31-21.767 12.459-31.957c2.619.758 5.16 1.557 7.61 2.4c23.69 8.156 38.14 20.213 38.14 29.504c0 9.896-15.606 22.743-40.946 31.14Zm-10.514 20.834c2.562 12.94 2.927 24.64 1.23 33.787c-1.524 8.219-4.59 13.698-8.382 15.893c-8.067 4.67-25.32-1.4-43.927-17.412a156.726 156.726 0 0 1-6.437-5.87c7.214-7.889 14.423-17.06 21.459-27.246c12.376-1.098 24.068-2.894 34.671-5.345a134.17 134.17 0 0 1 1.386 6.193ZM87.276 214.515c-7.882 2.783-14.16 2.863-17.955.675c-8.075-4.657-11.432-22.636-6.853-46.752a156.923 156.923 0 0 1 1.869-8.499c10.486 2.32 22.093 3.988 34.498 4.994c7.084 9.967 14.501 19.128 21.976 27.15a134.668 134.668 0 0 1-4.877 4.492c-9.933 8.682-19.886 14.842-28.658 17.94ZM50.35 144.747c-12.483-4.267-22.792-9.812-29.858-15.863c-6.35-5.437-9.555-10.836-9.555-15.216c0-9.322 13.897-21.212 37.076-29.293c2.813-.98 5.757-1.905 8.812-2.773c3.204 10.42 7.406 21.315 12.477 32.332c-5.137 11.18-9.399 22.249-12.634 32.792a134.718 134.718 0 0 1-6.318-1.979Zm12.378-84.26c-4.811-24.587-1.616-43.134 6.425-47.789c8.564-4.958 27.502 2.111 47.463 19.835a144.318 144.318 0 0 1 3.841 3.545c-7.438 7.987-14.787 17.08-21.808 26.988c-12.04 1.116-23.565 2.908-34.161 5.309a160.342 160.342 0 0 1-1.76-7.887Zm110.427 27.268a347.8 347.8 0 0 0-7.785-12.803c8.168 1.033 15.994 2.404 23.343 4.08c-2.206 7.072-4.956 14.465-8.193 22.045a381.151 381.151 0 0 0-7.365-13.322Zm-45.032-43.861c5.044 5.465 10.096 11.566 15.065 18.186a322.04 322.04 0 0 0-30.257-.006c4.974-6.559 10.069-12.652 15.192-18.18ZM82.802 87.83a323.167 323.167 0 0 0-7.227 13.238c-3.184-7.553-5.909-14.98-8.134-22.152c7.304-1.634 15.093-2.97 23.209-3.984a321.524 321.524 0 0 0-7.848 12.897Zm8.081 65.352c-8.385-.936-16.291-2.203-23.593-3.793c2.26-7.3 5.045-14.885 8.298-22.6a321.187 321.187 0 0 0 7.257 13.246c2.594 4.48 5.28 8.868 8.038 13.147Zm37.542 31.03c-5.184-5.592-10.354-11.779-15.403-18.433c4.902.192 9.899.29 14.978.29c5.218 0 10.376-.117 15.453-.343c-4.985 6.774-10.018 12.97-15.028 18.486Zm52.198-57.817c3.422 7.8 6.306 15.345 8.596 22.52c-7.422 1.694-15.436 3.058-23.88 4.071a382.417 382.417 0 0 0 7.859-13.026a347.403 347.403 0 0 0 7.425-13.565Zm-16.898 8.101a358.557 358.557 0 0 1-12.281 19.815a329.4 329.4 0 0 1-23.444.823c-7.967 0-15.716-.248-23.178-.732a310.202 310.202 0 0 1-12.513-19.846h.001a307.41 307.41 0 0 1-10.923-20.627a310.278 310.278 0 0 1 10.89-20.637l-.001.001a307.318 307.318 0 0 1 12.413-19.761c7.613-.576 15.42-.876 23.31-.876H128c7.926 0 15.743.303 23.354.883a329.357 329.357 0 0 1 12.335 19.695a358.489 358.489 0 0 1 11.036 20.54a329.472 329.472 0 0 1-11 20.722Zm22.56-122.124c8.572 4.944 11.906 24.881 6.52 51.026c-.344 1.668-.73 3.367-1.15 5.09c-10.622-2.452-22.155-4.275-34.23-5.408c-7.034-10.017-14.323-19.124-21.64-27.008a160.789 160.789 0 0 1 5.888-5.4c18.9-16.447 36.564-22.941 44.612-18.3ZM128 90.808c12.625 0 22.86 10.235 22.86 22.86s-10.235 22.86-22.86 22.86s-22.86-10.235-22.86-22.86s10.235-22.86 22.86-22.86Z"></path></svg>
</file>

<file path="destroyer-clicker/src/App.css">
#root {
  max-width: 1280px;
  margin: 0 auto;
  padding: 2rem;
  text-align: center;
}

.logo {
  height: 6em;
  padding: 1.5em;
  will-change: filter;
  transition: filter 300ms;
}
.logo:hover {
  filter: drop-shadow(0 0 2em #646cffaa);
}
.logo.react:hover {
  filter: drop-shadow(0 0 2em #61dafbaa);
}

@keyframes logo-spin {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}

@media (prefers-reduced-motion: no-preference) {
  a:nth-of-type(2) .logo {
    animation: logo-spin infinite 20s linear;
  }
}

.card {
  padding: 2em;
}

.read-the-docs {
  color: #888;
}
</file>

<file path="destroyer-clicker/src/App.tsx">
import { useState } from 'react'
import reactLogo from './assets/react.svg'
import viteLogo from '/vite.svg'
import './App.css'

function App() {
  const [count, setCount] = useState(0)

  return (
    <>
      <div>
        <a href="https://vite.dev" target="_blank">
          <img src={viteLogo} className="logo" alt="Vite logo" />
        </a>
        <a href="https://react.dev" target="_blank">
          <img src={reactLogo} className="logo react" alt="React logo" />
        </a>
      </div>
      <h1>Vite + React</h1>
      <div className="card">
        <button onClick={() => setCount((count) => count + 1)}>
          count is {count}
        </button>
        <p>
          Edit <code>src/App.tsx</code> and save to test HMR
        </p>
      </div>
      <p className="read-the-docs">
        Click on the Vite and React logos to learn more
      </p>
    </>
  )
}

export default App
</file>

<file path="destroyer-clicker/src/index.css">
:root {
  font-family: system-ui, Avenir, Helvetica, Arial, sans-serif;
  line-height: 1.5;
  font-weight: 400;

  color-scheme: light dark;
  color: rgba(255, 255, 255, 0.87);
  background-color: #242424;

  font-synthesis: none;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

a {
  font-weight: 500;
  color: #646cff;
  text-decoration: inherit;
}
a:hover {
  color: #535bf2;
}

body {
  margin: 0;
  display: flex;
  place-items: center;
  min-width: 320px;
  min-height: 100vh;
}

h1 {
  font-size: 3.2em;
  line-height: 1.1;
}

button {
  border-radius: 8px;
  border: 1px solid transparent;
  padding: 0.6em 1.2em;
  font-size: 1em;
  font-weight: 500;
  font-family: inherit;
  background-color: #1a1a1a;
  cursor: pointer;
  transition: border-color 0.25s;
}
button:hover {
  border-color: #646cff;
}
button:focus,
button:focus-visible {
  outline: 4px auto -webkit-focus-ring-color;
}

@media (prefers-color-scheme: light) {
  :root {
    color: #213547;
    background-color: #ffffff;
  }
  a:hover {
    color: #747bff;
  }
  button {
    background-color: #f9f9f9;
  }
}
</file>

<file path="destroyer-clicker/.gitignore">
# Logs
logs
*.log
npm-debug.log*
yarn-debug.log*
yarn-error.log*
pnpm-debug.log*
lerna-debug.log*

node_modules
dist
dist-ssr
*.local

# Editor directories and files
.vscode/*
!.vscode/extensions.json
.idea
.DS_Store
*.suo
*.ntvs*
*.njsproj
*.sln
*.sw?
</file>

<file path="destroyer-clicker/eslint.config.js">
import js from '@eslint/js'
import globals from 'globals'
import reactHooks from 'eslint-plugin-react-hooks'
import reactRefresh from 'eslint-plugin-react-refresh'
import tseslint from 'typescript-eslint'
import { defineConfig, globalIgnores } from 'eslint/config'

export default defineConfig([
  globalIgnores(['dist']),
  {
    files: ['**/*.{ts,tsx}'],
    extends: [
      js.configs.recommended,
      tseslint.configs.recommended,
      reactHooks.configs.flat.recommended,
      reactRefresh.configs.vite,
    ],
    languageOptions: {
      ecmaVersion: 2020,
      globals: globals.browser,
    },
  },
])
</file>

<file path="destroyer-clicker/index.html">
<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>destroyer-clicker</title>
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>
</file>

<file path="destroyer-clicker/package.json">
{
  "name": "destroyer-clicker",
  "private": true,
  "version": "0.0.0",
  "type": "module",
  "scripts": {
    "dev": "vite",
    "build": "tsc -b && vite build",
    "lint": "eslint .",
    "preview": "vite preview"
  },
  "dependencies": {
    "react": "^19.2.0",
    "react-dom": "^19.2.0"
  },
  "devDependencies": {
    "@eslint/js": "^9.39.1",
    "@types/node": "^24.10.1",
    "@types/react": "^19.2.5",
    "@types/react-dom": "^19.2.3",
    "@vitejs/plugin-react": "^5.1.1",
    "eslint": "^9.39.1",
    "eslint-plugin-react-hooks": "^7.0.1",
    "eslint-plugin-react-refresh": "^0.4.24",
    "globals": "^16.5.0",
    "typescript": "~5.9.3",
    "typescript-eslint": "^8.46.4",
    "vite": "^7.2.4"
  }
}
</file>

<file path="destroyer-clicker/README.md">
# React + TypeScript + Vite

This template provides a minimal setup to get React working in Vite with HMR and some ESLint rules.

Currently, two official plugins are available:

- [@vitejs/plugin-react](https://github.com/vitejs/vite-plugin-react/blob/main/packages/plugin-react) uses [Babel](https://babeljs.io/) (or [oxc](https://oxc.rs) when used in [rolldown-vite](https://vite.dev/guide/rolldown)) for Fast Refresh
- [@vitejs/plugin-react-swc](https://github.com/vitejs/vite-plugin-react/blob/main/packages/plugin-react-swc) uses [SWC](https://swc.rs/) for Fast Refresh

## React Compiler

The React Compiler is not enabled on this template because of its impact on dev & build performances. To add it, see [this documentation](https://react.dev/learn/react-compiler/installation).

## Expanding the ESLint configuration

If you are developing a production application, we recommend updating the configuration to enable type-aware lint rules:

```js
export default defineConfig([
  globalIgnores(['dist']),
  {
    files: ['**/*.{ts,tsx}'],
    extends: [
      // Other configs...

      // Remove tseslint.configs.recommended and replace with this
      tseslint.configs.recommendedTypeChecked,
      // Alternatively, use this for stricter rules
      tseslint.configs.strictTypeChecked,
      // Optionally, add this for stylistic rules
      tseslint.configs.stylisticTypeChecked,

      // Other configs...
    ],
    languageOptions: {
      parserOptions: {
        project: ['./tsconfig.node.json', './tsconfig.app.json'],
        tsconfigRootDir: import.meta.dirname,
      },
      // other options...
    },
  },
])
```

You can also install [eslint-plugin-react-x](https://github.com/Rel1cx/eslint-react/tree/main/packages/plugins/eslint-plugin-react-x) and [eslint-plugin-react-dom](https://github.com/Rel1cx/eslint-react/tree/main/packages/plugins/eslint-plugin-react-dom) for React-specific lint rules:

```js
// eslint.config.js
import reactX from 'eslint-plugin-react-x'
import reactDom from 'eslint-plugin-react-dom'

export default defineConfig([
  globalIgnores(['dist']),
  {
    files: ['**/*.{ts,tsx}'],
    extends: [
      // Other configs...
      // Enable lint rules for React
      reactX.configs['recommended-typescript'],
      // Enable lint rules for React DOM
      reactDom.configs.recommended,
    ],
    languageOptions: {
      parserOptions: {
        project: ['./tsconfig.node.json', './tsconfig.app.json'],
        tsconfigRootDir: import.meta.dirname,
      },
      // other options...
    },
  },
])
```
</file>

<file path="destroyer-clicker/tsconfig.app.json">
{
  "compilerOptions": {
    "tsBuildInfoFile": "./node_modules/.tmp/tsconfig.app.tsbuildinfo",
    "target": "ES2022",
    "useDefineForClassFields": true,
    "lib": ["ES2022", "DOM", "DOM.Iterable"],
    "module": "ESNext",
    "types": ["vite/client"],
    "skipLibCheck": true,

    /* Bundler mode */
    "moduleResolution": "bundler",
    "allowImportingTsExtensions": true,
    "verbatimModuleSyntax": true,
    "moduleDetection": "force",
    "noEmit": true,
    "jsx": "react-jsx",

    /* Linting */
    "strict": true,
    "noUnusedLocals": true,
    "noUnusedParameters": true,
    "erasableSyntaxOnly": true,
    "noFallthroughCasesInSwitch": true,
    "noUncheckedSideEffectImports": true
  },
  "include": ["src"]
}
</file>

<file path="destroyer-clicker/tsconfig.json">
{
  "files": [],
  "references": [
    { "path": "./tsconfig.app.json" },
    { "path": "./tsconfig.node.json" }
  ]
}
</file>

<file path="destroyer-clicker/tsconfig.node.json">
{
  "compilerOptions": {
    "tsBuildInfoFile": "./node_modules/.tmp/tsconfig.node.tsbuildinfo",
    "target": "ES2023",
    "lib": ["ES2023"],
    "module": "ESNext",
    "types": ["node"],
    "skipLibCheck": true,

    /* Bundler mode */
    "moduleResolution": "bundler",
    "allowImportingTsExtensions": true,
    "verbatimModuleSyntax": true,
    "moduleDetection": "force",
    "noEmit": true,

    /* Linting */
    "strict": true,
    "noUnusedLocals": true,
    "noUnusedParameters": true,
    "erasableSyntaxOnly": true,
    "noFallthroughCasesInSwitch": true,
    "noUncheckedSideEffectImports": true
  },
  "include": ["vite.config.ts"]
}
</file>

<file path="src/components/achievements/AchievementItem.tsx">
import React from 'react';
import { Achievement } from '../../types/Achievement';

interface Props {
  achievement: Achievement;
  unlocked: boolean;
}

export function AchievementItem({ achievement, unlocked }: Props) {
  if (achievement.hidden && !unlocked) {
    return (
      <div className="border border-gray-300 p-2 text-sm text-gray-400 italic">
        ???
      </div>
    );
  }

  return (
    <div
      className={`border border-gray-300 p-2 text-sm ${
        unlocked ? 'bg-white' : 'bg-gray-100 text-gray-500'
      }`}
    >
      <div className="font-medium">{achievement.name}</div>
      <div className="text-xs">{achievement.description}</div>
    </div>
  );
}
</file>

<file path="src/components/achievements/AchievementsButton.tsx">
import React from 'react';
import { Trophy } from 'lucide-react';

interface Props {
  onClick: () => void;
  disabled?: boolean;
}

export function AchievementsButton({ onClick, disabled }: Props) {
  return (
    <button
      onClick={onClick}
      disabled={disabled}
      className={`flex items-center gap-2 px-4 py-1 border border-gray-400 text-sm ${
        disabled
          ? 'bg-gray-200 cursor-not-allowed'
          : 'bg-white hover:bg-gray-50'
      }`}
    >
      <Trophy size={16} />
      Achievements
    </button>
  );
}
</file>

<file path="src/components/achievements/AchievementsPanel.tsx">
import React from 'react';
import { achievements } from '../../data/achievements';
import { AchievementItem } from './AchievementItem';

interface Props {
  unlockedAchievements: Set<string>;
  onClose: () => void;
}

export function AchievementsPanel({ unlockedAchievements, onClose }: Props) {
  return (
    <div className="absolute inset-0 bg-black/40 flex items-center justify-center z-50">
      <div className="w-[420px] max-h-[70vh] bg-[#f6f6f6] border border-gray-400 p-4 flex flex-col">
        <div className="flex justify-between items-center mb-3">
          <h2 className="text-sm uppercase text-gray-600">Achievements</h2>
          <button
            onClick={onClose}
            className="text-xs border border-gray-400 px-2 hover:bg-gray-200"
          >
            Close
          </button>
        </div>

        <div className="flex-1 overflow-y-auto flex flex-col gap-2">
          {achievements.map((achievement) => (
            <AchievementItem
              key={achievement.id}
              achievement={achievement}
              unlocked={unlockedAchievements.has(achievement.id)}
            />
          ))}
        </div>
      </div>
    </div>
  );
}
</file>

<file path="src/data/achievements.ts">
import { Achievement } from '../types/Achievement';

export const achievements: Achievement[] = [
  {
    id: 'first_click',
    name: 'Violence Begins',
    description: 'Click something for the first time.',
    condition: (state) => state.clicks >= 1,
    reward: {
      type: 'bonus',
      value: 'nothing',
    },
  },
  {
    id: 'first_destruction',
    name: 'It Is Gone',
    description: 'Destroy your first target.',
    condition: (state) => state.targetsDestroyed >= 1,
    reward: {
      type: 'unlock_system',
      value: 'upgrades',
    },
  },
  {
    id: 'ten_upgrades',
    name: 'Improvement Spiral',
    description: 'Purchase 10 upgrades.',
    hidden: true,
    condition: (state) => state.upgradesPurchased >= 10,
    reward: {
      type: 'unlock_system',
      value: 'auto_click',
    },
  },
];
</file>

<file path="src/data/currencies.ts">
import { Currency } from '../types/Currency';

export const currencies: Currency[] = [
  { id: 'bronze', name: 'Bronze', tier: 0 },
  { id: 'silver', name: 'Silver', tier: 1 },
  { id: 'gold', name: 'Gold', tier: 2 },
  { id: 'platinum', name: 'Platinum', tier: 3 },
];
</file>

<file path="src/data/targets.ts">
import { Target } from '../types/Target';

export const targets: Target[] = [
  {
    id: 'bubble',
    name: 'Bolha de Ar',
    subtitle: 'Extremamente fr√°gil',
    image: '/assets/targets/bubble.png',
    tier: 0,
    maxHP: { mantissa: 1, exponent: 0 },
    defense: { mantissa: 0, exponent: 0 },
    drops: {
      bronze: { mantissa: 1, exponent: 0 },
    },
  },
];
</file>

<file path="src/game/constants.ts">
import { BigNumber } from '../types/BigNumber';

export const BASE_CLICK_DAMAGE: BigNumber = {
  mantissa: 1,
  exponent: 0,
};

export const BASE_AUTO_DAMAGE: BigNumber = {
  mantissa: 1,
  exponent: 0,
};
</file>

<file path="src/game/gameReducer.ts">
import { GameState } from './GameState';
import { targets } from '../data/targets';
import { calculateAutoDamage, calculateAutoSpeed, calculateAutoDPS } from '../systems/autoClick';
import { tickDamage } from '../systems/tick';
import { applyDrops } from '../systems/drops';

type Action =
  | { type: 'CLICK' }
  | { type: 'BUY_UPGRADE'; id: string }
  | { type: 'TICK'; delta: number };

import { BASE_AUTO_DAMAGE } from '../game/constants';

export function gameReducer(
  state: GameState,
  action: Action
): GameState {
  switch (action.type) {
    case 'TICK': {
      // Se o sistema n√£o foi desbloqueado, n√£o faz nada
      if (!state.unlocks.autoClick) return state;

      const target = targets[state.targetIndex];

      const autoDamageLevel = state.upgrades['auto_damage'] ?? 0;
      const autoSpeedLevel = state.upgrades['auto_speed'] ?? 0;

      if (autoDamageLevel === 0) return state;

      const autoDamage = calculateAutoDamage(
        BASE_AUTO_DAMAGE,
        autoDamageLevel
      );

      const autoSpeed = calculateAutoSpeed(autoSpeedLevel);

      const autoDps = calculateAutoDPS(autoDamage, autoSpeed);

      const result = tickDamage(
        state.hp,
        autoDps,
        target.defense,
        action.delta
      );

      // Target destru√≠do automaticamente
      if (result.destroyed) {
        const newCurrencies = applyDrops(
          state.currencies,
          target.drops
        );

        const nextIndex =
          state.targetIndex < targets.length - 1
            ? state.targetIndex + 1
            : state.targetIndex;

        return {
          ...state,
          targetIndex: nextIndex,
          hp: targets[nextIndex].maxHP,
          currencies: newCurrencies,
        };
      }

      // Apenas dano cont√≠nuo
      return {
        ...state,
        hp: result.newHp,
      };
    }

    default:
      return state;
  }
}
</file>

<file path="src/game/GameState.ts">
import { BigNumber } from '../types/BigNumber';
import { Unlocks } from '../types/Unlocks';

export interface GameState {
  targetIndex: number;
  hp: BigNumber;
  currencies: Record<string, BigNumber>;
  upgrades: Record<string, number>;
  unlocks: Unlocks;
}
</file>

<file path="src/systems/bigNumbers.ts">
import { BigNumber } from '../types/BigNumber';

export const ZERO: BigNumber = { mantissa: 0, exponent: 0 };

export function normalize(n: BigNumber): BigNumber {
  if (n.mantissa === 0) return ZERO;

  let mantissa = n.mantissa;
  let exponent = n.exponent;

  while (mantissa >= 10) {
    mantissa /= 10;
    exponent += 1;
  }

  while (mantissa < 1 && exponent > 0) {
    mantissa *= 10;
    exponent -= 1;
  }

  const remainder = exponent % 3;
  if (remainder !== 0) {
    mantissa *= Math.pow(10, remainder);
    exponent -= remainder;
  }

  return { mantissa, exponent };
}

export function add(a: BigNumber, b: BigNumber): BigNumber {
  if (a.mantissa === 0) return b;
  if (b.mantissa === 0) return a;

  const diff = a.exponent - b.exponent;

  if (Math.abs(diff) > 9) {
    return diff > 0 ? a : b;
  }

  const mantissa =
    diff >= 0
      ? a.mantissa + b.mantissa / Math.pow(10, diff)
      : a.mantissa / Math.pow(10, -diff) + b.mantissa;

  const exponent = diff >= 0 ? a.exponent : b.exponent;

  return normalize({ mantissa, exponent });
}

export function subtract(a: BigNumber, b: BigNumber): BigNumber {
  const negB: BigNumber = { mantissa: -b.mantissa, exponent: b.exponent };
  return normalize(add(a, negB));
}

export function multiply(a: BigNumber, b: BigNumber): BigNumber {
  return normalize({
    mantissa: a.mantissa * b.mantissa,
    exponent: a.exponent + b.exponent,
  });
}

export function compare(a: BigNumber, b: BigNumber): number {
  if (a.exponent !== b.exponent) {
    return a.exponent > b.exponent ? 1 : -1;
  }
  return a.mantissa > b.mantissa ? 1 : a.mantissa < b.mantissa ? -1 : 0;
}
</file>

<file path="src/systems/damage.ts">
import { BigNumber } from '../types/BigNumber';
import { subtract, compare } from './bigNumbers';

export function applyDamage(
  hp: BigNumber,
  damage: BigNumber,
  defense: BigNumber
): BigNumber {
  const effective =
    compare(damage, defense) > 0
      ? subtract(damage, defense)
      : { mantissa: 0, exponent: 0 };

  const result = subtract(hp, effective);

  return compare(result, { mantissa: 0, exponent: 0 }) < 0
    ? { mantissa: 0, exponent: 0 }
    : result;
}
</file>

<file path="src/systems/drops.ts">
import { BigNumber } from '../types/BigNumber';
import { add } from './bigNumbers';

export function applyDrops(
  inventory: Record<string, BigNumber>,
  drops: Record<string, BigNumber>
) {
  const result = { ...inventory };

  for (const id in drops) {
    result[id] = result[id]
      ? add(result[id], drops[id])
      : drops[id];
  }

  return result;
}
</file>

<file path="src/systems/log.ts">
export interface LogEntry {
  id: number;
  text: string;
}

let logId = 0;

export function createLog(text: string): LogEntry {
  return {
    id: ++logId,
    text,
  };
}
</file>

<file path="src/systems/saveMapper.ts">
import { SaveData } from './save';
import { GameState } from '../game/GameState';
import { targets } from '../data/targets';

export function saveToGameState(save: SaveData): GameState {
  return {
    targetIndex: 0,
    hp: targets[0].maxHP,
    currencies: save.currencies,
    upgrades: save.upgrades,
    unlocks: save.unlocks,
  };
}

export function gameStateToSave(state: GameState): SaveData {
  return {
    version: 1,
    currencies: state.currencies,
    upgrades: state.upgrades,
    achievements: [],
    unlocks: state.unlocks,
    lastPlayed: Date.now(),
  };
}
</file>

<file path="src/systems/tick.ts">
import { BigNumber } from '../types/BigNumber';
import { applyDamage } from './damage';

export interface TickResult {
  newHp: BigNumber;
  destroyed: boolean;
}

export function tickDamage(
  hp: BigNumber,
  autoDps: BigNumber,
  defense: BigNumber,
  deltaSeconds: number
): TickResult {
  if (autoDps.mantissa === 0) {
    return { newHp: hp, destroyed: false };
  }

  const damage: BigNumber = {
    mantissa: autoDps.mantissa * deltaSeconds,
    exponent: autoDps.exponent,
  };

  const newHp = applyDamage(hp, damage, defense);

  return {
    newHp,
    destroyed: newHp.mantissa === 0,
  };
}
</file>

<file path="src/systems/unlocks.ts">
import { Unlocks } from '../types/Unlocks';

export function createInitialUnlocks(): Unlocks {
  return {
    upgrades: false,
    autoClick: false,
    achievements: true,
  };
}

export function unlockSystem(unlocks: Unlocks, system: keyof Unlocks): Unlocks {
  return {
    ...unlocks,
    [system]: true,
  };
}
</file>

<file path="src/systems/upgrades.ts">
import { BigNumber } from '../types/BigNumber';
import { add, multiply } from './bigNumbers';

export function getUpgradeCost(
  baseCost: BigNumber,
  level: number
): BigNumber {
  // custo = base * (1.5 ^ level)
  const multiplier = Math.pow(1.5, level);
  return multiply(baseCost, { mantissa: multiplier, exponent: 0 });
}

export function applyClickDamageUpgrade(
  baseDamage: BigNumber,
  level: number
): BigNumber {
  if (level === 0) return baseDamage;

  return add(baseDamage, {
    mantissa: level,
    exponent: 0,
  });
}
</file>

<file path="src/types/Achievement.ts">
export interface Achievement {
  id: string;
  name: string;
  description: string;
  hidden?: boolean;
  condition: (state: AchievementState) => boolean;
  reward: AchievementReward;
}

export interface AchievementState {
  clicks: number;
  targetsDestroyed: number;
  upgradesPurchased: number;
}

export interface AchievementReward {
  type: 'unlock_system' | 'bonus';
  value: string;
}
</file>

<file path="src/types/BigNumber.ts">
export interface BigNumber {
  mantissa: number;
  exponent: number;
}
</file>

<file path="src/types/Currency.ts">
export interface Currency {
  id: string;
  name: string;
  tier: number;
}
</file>

<file path="src/types/Target.ts">
import { BigNumber } from './BigNumber';

export interface Target {
  id: string;
  name: string;
  subtitle: string;
  image: string;
  tier: number;
  maxHP: BigNumber;
  defense: BigNumber;
  drops: Record<string, BigNumber>;
}
</file>

<file path="src/types/Unlocks.ts">
export interface Unlocks {
  upgrades: boolean;
  autoClick: boolean;
  achievements: boolean;
}
</file>

<file path="LICENSE.txt">
Este software √© propriet√°rio. Proibida c√≥pia, modifica√ß√£o ou distribui√ß√£o sem autoriza√ß√£o escrita.
</file>

<file path="destroyer-clicker/vite.config.ts">
import { defineConfig } from 'vite'
import react from '@vitejs/plugin-react'

// https://vite.dev/config/
export default defineConfig({
  plugins: [react()],
  base: '/effective-broccoli/',
})
</file>

<file path="src/data/autoClick.ts">
import { Upgrade } from '../types/Upgrade';

export const autoClickUpgrades: Upgrade[] = [
  {
    id: 'auto_damage',
    name: 'Auto Damage',
    description: 'Automatically deals damage every second.',
    maxLevel: 50,
    cost: {
      bronze: { mantissa: 15, exponent: 0 },
    },
  },
  {
    id: 'auto_speed',
    name: 'Auto Speed',
    description: 'Increases how often auto damage is applied.',
    maxLevel: 25,
    cost: {
      bronze: { mantissa: 50, exponent: 0 },
    },
  },
];
</file>

<file path="src/systems/achievementRewards.ts">
import { Unlocks } from '../types/Unlocks';
import { unlockSystem } from './unlocks';
import { Achievement } from '../types/Achievement';

export function applyAchievementReward(
  achievement: Achievement,
  unlocks: Unlocks
): Unlocks {
  if (achievement.reward.type === 'unlock_system') {
    return unlockSystem(
      unlocks,
      achievement.reward.value as keyof Unlocks
    );
  }

  return unlocks;
}
</file>

<file path="src/systems/achievements.ts">
import { Achievement, AchievementState } from '../types/Achievement';
import { Unlocks } from '../types/Unlocks';
import { applyAchievementReward } from './achievementRewards';

export interface AchievementProgress {
  unlocked: Set<string>;
}

export interface AchievementResult {
  unlockedIds: string[];
  unlocks: Unlocks;
}

export function checkAchievements(
  achievements: Achievement[],
  state: AchievementState,
  progress: AchievementProgress,
  unlocks: Unlocks
): AchievementResult {
  const unlockedIds: string[] = [];
  let newUnlocks = unlocks;

  for (const achievement of achievements) {
    if (progress.unlocked.has(achievement.id)) continue;

    if (achievement.condition(state)) {
      progress.unlocked.add(achievement.id);
      unlockedIds.push(achievement.id);

      newUnlocks = applyAchievementReward(
        achievement,
        newUnlocks
      );
    }
  }

  return {
    unlockedIds,
    unlocks: newUnlocks,
  };
}
</file>

<file path="src/systems/autoClick.ts">
import { BigNumber } from '../types/BigNumber';
import { multiply, add } from './bigNumbers';

export function calculateAutoDamage(
  base: BigNumber,
  level: number
): BigNumber {
  if (level === 0) return { mantissa: 0, exponent: 0 };
  return multiply(base, { mantissa: level, exponent: 0 });
}

export function calculateAutoSpeed(level: number): number {
  return 1 + level * 0.25;
}

export function calculateAutoDPS(
  damage: BigNumber,
  speed: number
): BigNumber {
  return multiply(damage, { mantissa: speed, exponent: 0 });
}
</file>

<file path="src/types/Upgrade.ts">
import { BigNumber } from './BigNumber';

export interface Upgrade {
  id: string;
  name: string;
  description: string;
  maxLevel: number;
  cost: Record<string, BigNumber>;
}
</file>

<file path="src/App.tsx">
import { useEffect, useReducer, useRef, useState } from 'react';

import { targets } from './data/targets';
import { upgrades } from './data/upgrades';
import { achievements } from './data/achievements';

import { formatBigNumber } from './utils/format';
import { applyDamage } from './systems/damage';
import { tickDamage } from './systems/tick';
import { calculateAutoDPS } from './systems/autoClick';
import { getUpgradeCost, applyClickDamageUpgrade } from './systems/upgrades';
import { checkAchievements } from './systems/achievements';
import { compare, subtract } from './systems/bigNumbers';
import { createLog, LogEntry } from './systems/log';
import { loadSave, saveGame, createNewSave } from './systems/save';
import { saveToGameState } from './systems/saveMapper';
import { GameState } from './game/GameState';

import { BigNumber } from './types/BigNumber';
import { AchievementProgress } from './systems/achievements';
import { AchievementState } from './types/Achievement';

// Importar componentes de achievements
import { AchievementsButton } from './components/achievements/AchievementsButton';
import { AchievementsPanel } from './components/achievements/AchievementsPanel';

// Definir a√ß√µes para o reducer
type GameAction =
  | { type: 'SET_TARGET'; payload: number }
  | { type: 'SET_HP'; payload: BigNumber }
  | { type: 'SET_CURRENCIES'; payload: { bronze: BigNumber } }
  | { type: 'SET_UPGRADES'; payload: Record<string, number> }
  | { type: 'SET_UNLOCKS'; payload: { achievements: boolean; upgrades: boolean; autoClick: boolean } }
  | { type: 'APPLY_DROPS'; payload: Array<{ currency: string; amount: BigNumber }> }
  | { type: 'BUY_UPGRADE'; payload: { id: string; cost: BigNumber; level: number } }
  | { type: 'TICK'; payload: { delta: number } };

// Reducer function
function gameReducer(state: GameState, action: GameAction): GameState {
  switch (action.type) {
    case 'SET_TARGET':
      return {
        ...state,
        targetIndex: action.payload,
        hp: targets[action.payload].maxHP
      };
    
    case 'SET_HP':
      return {
        ...state,
        hp: action.payload
      };
    
    case 'SET_CURRENCIES':
      return {
        ...state,
        currencies: action.payload
      };
    
    case 'SET_UPGRADES':
      return {
        ...state,
        upgrades: action.payload
      };
    
    case 'SET_UNLOCKS':
      return {
        ...state,
        unlocks: action.payload
      };
    
    case 'APPLY_DROPS':
      const newCurrencies = { ...state.currencies };
      action.payload.forEach(drop => {
        if (drop.currency === 'bronze') {
          newCurrencies.bronze = {
            mantissa: newCurrencies.bronze.mantissa + drop.amount.mantissa,
            exponent: newCurrencies.bronze.exponent + drop.amount.exponent
          };
        }
      });
      return {
        ...state,
        currencies: newCurrencies
      };
    
    case 'BUY_UPGRADE':
      const newUpgrades = { ...state.upgrades };
      newUpgrades[action.payload.id] = action.payload.level;
      
      return {
        ...state,
        currencies: {
          ...state.currencies,
          bronze: subtract(state.currencies.bronze, action.payload.cost)
        },
        upgrades: newUpgrades
      };
    
    case 'TICK':
      return state;
    
    default:
      return state;
  }
}

const Panel = ({ title, children, disabled = false }: any) => (
  <div
    className={`border border-gray-300 p-3 flex flex-col bg-white ${
      disabled ? 'opacity-40 pointer-events-none' : ''
    }`}
  >
    <h2 className="text-xs uppercase text-gray-500 mb-2">{title}</h2>
    {children}
  </div>
);

const ZERO: BigNumber = { mantissa: 0, exponent: 0 };

export default function App() {
  // ===== LOAD SAVE =====
  const save = loadSave() ?? createNewSave();

  // ===== INITIAL STATE =====
  const initialState = saveToGameState(save);

  // ===== USE REDUCER =====
  const [state, dispatch] = useReducer(gameReducer, initialState);

  // Destructuring para facilitar o uso
  const { targetIndex, hp, currencies, upgrades: upgradeLevels, unlocks } = state;
  const target = targets[targetIndex];

  // ===== LOCAL STATE (n√£o relacionado ao reducer) =====
  const [showAchievements, setShowAchievements] = useState(false);
  const [log, setLog] = useState<LogEntry[]>([
    createLog('You exist. Unfortunately.'),
  ]);

  // ===== ACHIEVEMENT STATE =====
  const [achievementProgress] = useState<AchievementProgress>({
    unlocked: new Set(),
  });

  const achievementState = useRef<AchievementState>({
    clicks: 0,
    targetsDestroyed: 0,
    upgradesPurchased: 0,
  });

  // ===== DAMAGE =====
  const baseClickDamage: BigNumber = { mantissa: 1, exponent: 0 };
  const clickDamage = applyClickDamageUpgrade(
    baseClickDamage,
    upgradeLevels['click_damage'] ?? 0
  );

  const autoDamage: BigNumber = { mantissa: 0, exponent: 0 };
  const autoSpeed = 0;
  const autoDps = calculateAutoDPS(autoDamage, autoSpeed);

  // ===== SAVE EFFECT =====
  useEffect(() => {
    const achievementsArray = Array.from(achievementProgress.unlocked);
    
    saveGame({
      version: 1,
      currencies,
      upgrades: upgradeLevels,
      discovery: { currencies: ['bronze'] },
      achievements: achievementsArray,
      unlocks,
      lastPlayed: Date.now(),
    });
  }, [currencies, upgradeLevels, achievementProgress, unlocks]);

  // ===== LOG HELPER =====
  const pushLog = useRef((text: string) => {
    setLog((prev) => [...prev.slice(-30), createLog(text)]);
  }).current;

  // ===== ACHIEVEMENT CHECK =====
  const evaluateAchievements = useRef(() => {
    const result = checkAchievements(
      achievements,
      achievementState.current,
      achievementProgress,
      unlocks
    );

    result.unlockedIds.forEach((id) => {
      const a = achievements.find((x) => x.id === id);
      if (!a) return;

      pushLog(`Achievement unlocked: ${a.name}`);
    });

    if (result.unlocks !== unlocks) {
      dispatch({ type: 'SET_UNLOCKS', payload: result.unlocks });
    }
  }).current;

  // ===== CLICK =====
  const onClickTarget = useRef(() => {
    achievementState.current.clicks += 1;

    const newHp = applyDamage(hp, clickDamage, target.defense);
    dispatch({ type: 'SET_HP', payload: newHp });

    evaluateAchievements();

    if (newHp.mantissa === 0) {
      achievementState.current.targetsDestroyed += 1;

      pushLog(`You destroyed ${target.name}.`);
      
      dispatch({ 
        type: 'APPLY_DROPS', 
        payload: Object.entries(target.drops).map(([currency, amount]) => ({ 
          currency, 
          amount 
        })) 
      });

      if (targetIndex < targets.length - 1) {
        const newTargetIndex = targetIndex + 1;
        dispatch({ type: 'SET_TARGET', payload: newTargetIndex });
        pushLog('A new target appears.');
      } else {
        dispatch({ type: 'SET_HP', payload: target.maxHP });
      }

      evaluateAchievements();
    }
  }).current;

  // ===== BUY UPGRADE =====
  const buyUpgrade = useRef((id: string) => {
    const upgrade = upgrades.find((u) => u.id === id);
    if (!upgrade) return;

    const level = upgradeLevels[id] ?? 0;
    if (level >= upgrade.maxLevel) return;

    const cost = getUpgradeCost(upgrade.cost.bronze, level);
    if (compare(currencies.bronze, cost) < 0) return;

    dispatch({
      type: 'BUY_UPGRADE',
      payload: { id, cost, level: level + 1 }
    });

    achievementState.current.upgradesPurchased += 1;

    pushLog(`Upgrade purchased: ${upgrade.name} (Lv ${level + 1})`);
    evaluateAchievements();
  }).current;

  // ===== √öNICO TICK LOOP =====
  useEffect(() => {
    let frame: number;
    let last = performance.now();

    function loop(now: number) {
      const delta = (now - last) / 1000;
      last = now;

      dispatch({ type: 'TICK', payload: { delta } });

      if (autoDps.mantissa > 0) {
        const result = tickDamage(hp, autoDps, target.defense, delta);
        
        if (result.destroyed) {
          achievementState.current.targetsDestroyed += 1;
          
          dispatch({ 
            type: 'APPLY_DROPS', 
            payload: Object.entries(target.drops).map(([currency, amount]) => ({ 
              currency, 
              amount 
            })) 
          });

          if (targetIndex < targets.length - 1) {
            const newTargetIndex = targetIndex + 1;
            dispatch({ type: 'SET_TARGET', payload: newTargetIndex });
            pushLog('Destroyed automatically.');
          } else {
            dispatch({ type: 'SET_HP', payload: target.maxHP });
          }

          evaluateAchievements();
        } else if (result.newHp.mantissa !== hp.mantissa || result.newHp.exponent !== hp.exponent) {
          dispatch({ type: 'SET_HP', payload: result.newHp });
        }
      }

      frame = requestAnimationFrame(loop);
    }

    frame = requestAnimationFrame(loop);
    return () => cancelAnimationFrame(frame);
  }, [dispatch, autoDps, hp, target.defense, target.drops, target.maxHP, targetIndex, evaluateAchievements, pushLog]);

  // ===== RENDER =====
  return (
    <div className="h-screen w-full bg-[#f6f6f6] text-gray-800 flex flex-col select-none">
      <header className="flex justify-between px-6 py-3 bg-white border-b">
        <h1 className="text-xl font-bold">Destroyer Clicker</h1>
        <span className="font-medium">üü§ {formatBigNumber(currencies.bronze)}</span>
      </header>

      <main className="flex-1 grid grid-cols-[320px_1fr] gap-6 p-6">
        <aside className="flex flex-col gap-4">
          <Panel title="Target">
            <img
              src={target.image}
              onClick={onClickTarget}
              draggable={false}
              className="w-48 mx-auto cursor-pointer active:scale-95 transition"
            />
            <h2 className="text-center text-xl font-medium mt-2">{target.name}</h2>
            <p className="text-center text-gray-500 text-sm">{target.subtitle}</p>
          </Panel>

          <Panel title="Target Status">
            <div className="space-y-1">
              <p className="flex justify-between">
                <span className="text-gray-600">HP:</span>
                <span className="font-medium">{formatBigNumber(hp)}</span>
              </p>
              <p className="flex justify-between">
                <span className="text-gray-600">Defense:</span>
                <span className="font-medium">{formatBigNumber(target.defense)}</span>
              </p>
            </div>
          </Panel>
        </aside>

        <section className="grid grid-rows-[auto_auto_1fr] gap-6">
          <Panel title="Upgrades">
            <div className="space-y-2">
              {upgrades.map((u) => {
                const level = upgradeLevels[u.id] ?? 0;
                const cost = getUpgradeCost(u.cost.bronze, level);
                const affordable = compare(currencies.bronze, cost) >= 0;

                return (
                  <button
                    key={u.id}
                    onClick={() => buyUpgrade(u.id)}
                    disabled={!affordable || level >= u.maxLevel}
                    className={`w-full border border-gray-300 p-3 text-left hover:bg-gray-50 disabled:opacity-40 transition ${
                      affordable && level < u.maxLevel ? 'cursor-pointer' : 'cursor-not-allowed'
                    }`}
                  >
                    <div className="flex justify-between items-start">
                      <div>
                        <strong className="text-gray-800">{u.name}</strong>
                        <p className="text-sm text-gray-600 mt-1">{u.description}</p>
                      </div>
                      <div className="text-right">
                        <span className="inline-block px-2 py-1 bg-gray-100 text-gray-700 text-xs rounded">
                          Lv {level}/{u.maxLevel}
                        </span>
                      </div>
                    </div>
                    <div className="mt-2 flex justify-between items-center">
                      <span className="text-sm text-gray-500">Cost:</span>
                      <span className="font-medium">{formatBigNumber(cost)} üü§</span>
                    </div>
                  </button>
                );
              })}
            </div>
          </Panel>

          <Panel title="Stats">
            <div className="space-y-2">
              <p className="flex justify-between">
                <span className="text-gray-600">Damage / click:</span>
                <span className="font-medium">{formatBigNumber(clickDamage)}</span>
              </p>
              <p className="flex justify-between">
                <span className="text-gray-600">Auto DPS:</span>
                <span className="font-medium">{formatBigNumber(autoDps)}</span>
              </p>
              <p className="flex justify-between">
                <span className="text-gray-600">Luck:</span>
                <span className="font-medium">0%</span>
              </p>
            </div>
          </Panel>

          <Panel title="Log">
            <div className="flex-1 border border-gray-200 p-3 text-sm text-gray-600 overflow-y-auto h-64">
              <div className="space-y-1">
                {log.map((l) => (
                  <div key={l.id} className="py-1 border-b border-gray-100 last:border-0">
                    {l.text}
                  </div>
                ))}
              </div>
            </div>
          </Panel>
        </section>
      </main>

      <footer className="px-4 py-2 bg-[#e0e0e0] border-t text-sm flex justify-between items-center">
        <span className="text-gray-600">
          Destruction continues even when you do nothing.
        </span>
        
        <AchievementsButton
          onClick={() => setShowAchievements(true)}
          disabled={!unlocks.achievements}
        />
      </footer>

      {showAchievements && (
        <AchievementsPanel
          unlockedAchievements={new Set(save.achievements || [])}
          onClose={() => setShowAchievements(false)}
        />
      )}
    </div>
  );
}
</file>

<file path="destroyer-clicker/src/main.tsx">
import React from 'react';
import ReactDOM from 'react-dom/client';
import App from './App';
import './index.css'; // se existir

ReactDOM.createRoot(
  document.getElementById('root') as HTMLElement
).render(
  <React.StrictMode>
    <App />
  </React.StrictMode>
);
</file>

<file path="src/data/upgrades.ts">
import { Upgrade } from '../types/Upgrade';

export const upgrades: Upgrade[] = [
  {
    id: 'click_damage',
    name: 'Stronger Finger',
    description: 'Increase click damage by +1 per level.',
    maxLevel: 50,
    cost: {
      bronze: { mantissa: 5, exponent: 0 },
    },
  },
  {
    id: 'auto_damage',
    name: 'Auto Damage',
    description: 'Automatically deals damage.',
    maxLevel: 50,
    cost: {
      bronze: { mantissa: 15, exponent: 0 },
    },
  },
  {
    id: 'auto_speed',
    name: 'Auto Speed',
    description: 'Increases auto damage speed.',
    maxLevel: 25,
    cost: {
      bronze: { mantissa: 50, exponent: 0 },
    },
  },
];
</file>

<file path="src/systems/save.ts">
import { Unlocks } from '../types/Unlocks';

const SAVE_KEY = 'destroyer_clicker_save_v1';

export interface SaveData {
  version: number;
  currencies: Record<string, any>; // Alterado de 'any' para 'Record<string, any>'
  upgrades: Record<string, number>;
  achievements: string[];
  unlocks: Unlocks;
  lastPlayed: number;
  discovery?: {
    currencies: string[];
  };
}

export function createNewSave(): SaveData {
  return {
    version: 1,
    currencies: {
      bronze: { mantissa: 0, exponent: 0 },
    },
    upgrades: {},
    achievements: [],
    unlocks: {
      upgrades: false,
      autoClick: false,
      achievements: true,
    },
    lastPlayed: Date.now(),
  };
}

// Fun√ß√£o de migra√ß√£o
function migrateSave(old: any): SaveData {
  // Por enquanto, reinicia ‚Äî no futuro voc√™ migra campos
  console.warn('Save version mismatch, creating new save');
  return createNewSave();
}

export function saveGame(data: SaveData) {
  localStorage.setItem(SAVE_KEY, JSON.stringify(data));
}

export function loadSave(): SaveData | null {
  const raw = localStorage.getItem(SAVE_KEY);
  if (!raw) return null;

  try {
    const save = JSON.parse(raw) as SaveData;

    if (save.version !== 1) {
      return migrateSave(save);
    }

    return save;
  } catch {
    return null;
  }
}
</file>

<file path="src/utils/format.ts">
import { BigNumber } from '../types/BigNumber';

const SUFFIXES: Record<number, string> = {
  0: '',
  3: 'K',
  6: 'M',
  9: 'B',
  12: 'T',
  15: 'Qa',
  18: 'Qi',
  21: 'Sx',
  24: 'Sp',
  27: 'Oc',
  30: 'No',
  33: 'Dc',
};

export function formatBigNumber(n: BigNumber): string {
  if (n.mantissa === 0) return '0';

  const suffix = SUFFIXES[n.exponent];
  if (!suffix) {
    return `${n.mantissa.toFixed(2)}e${n.exponent}`;
  }

  return `${n.mantissa.toFixed(2)}${suffix}`;
}
</file>

<file path=".github/workflows/pages.yml">
name: Deploy to GitHub Pages

on:
  push:
    branches: [ main ]

permissions:
  contents: write

jobs:
  build-and-deploy:
    runs-on: ubuntu-latest
    steps:
      # OPTION A: Use this for a complete manual clone (bypasses checkout action)
      - name: Complete Clean Clone (No Submodules)
        run: |
          echo "=== Performing complete manual clean clone ==="
          
          # Remove everything
          rm -rf ./* ./.* 2>/dev/null || true
          
          # Fresh clone WITHOUT checkout action
          git clone --no-checkout --single-branch --depth 1 --no-recurse-submodules \
            https://x-access-token:${{ secrets.GITHUB_TOKEN }}@github.com/${{ github.repository }} .
          
          # Checkout the specific commit
          git checkout ${{ github.sha }}
          
          # Purge ALL submodule data immediately
          echo "=== Purging all submodule data ==="
          git submodule deinit --all -f 2>/dev/null || true
          rm -rf .git/modules 2>/dev/null || true
          rm -f .gitmodules 2>/dev/null || true
          git config --remove-section submodule 2>/dev/null || true
          git config --global --remove-section submodule 2>/dev/null || true
          
          # Clean any node_modules git cache
          rm -rf node_modules 2>/dev/null || true
          
          echo "=== Clean clone complete ==="
          git status
        shell: bash

      # OR OPTION B: Use the checkout action with aggressive cleanup (comment out Option A above)
      # Uncomment the following lines if you prefer the checkout action approach:
      # - name: Remove orphaned submodules before checkout
      #   run: |
      #     echo "=== Cleaning orphaned submodules ==="
      #     rm -f .gitmodules 2>/dev/null || true
      #     git config --remove-section submodule 2>/dev/null || true
      #     git config --global --remove-section submodule 2>/dev/null || true
      #     rm -rf .git/modules/* 2>/dev/null || true
      #   shell: bash
      #
      # - name: Clean Checkout (No Submodules)
      #   uses: actions/checkout@v4
      #   with:
      #     submodules: false
      #     fetch-depth: 0
      #     clean: true
      #     persist-credentials: false
      #   env:
      #     GIT_CONFIG_COUNT: 0
      #     NO_SUBMODULES: true
      #
      # - name: Purge Git Cache Immediately
      #   run: |
      #     echo "=== Removing stale git cache and submodules ==="
      #     rm -rf .git/modules/* 2>/dev/null || true
      #     git config --remove-section "submodule" 2>/dev/null || true
      #     git config --global --remove-section "submodule" 2>/dev/null || true
      #     rm -f .gitmodules 2>/dev/null || true
      #     find . -name ".git" -type d -exec rm -rf {} + 2>/dev/null || true
      #     rm -rf node_modules/.cache/gh-pages 2>/dev/null || true

      - name: Setup Node
        uses: actions/setup-node@v4
        with:
          node-version: '20'
          cache: 'npm'

      - name: Install dependencies
        run: npm ci

      - name: Clean any remaining git artifacts
        run: |
          echo "=== Final cleanup ==="
          # Remove any .git directories that might have been pulled in via npm packages
          find node_modules -name ".git" -type d -exec rm -rf {} + 2>/dev/null || true
          find node_modules -name ".git*" -type f -exec rm -f {} + 2>/dev/null || true
          # Double-check for gh-pages cache
          rm -rf node_modules/.cache/gh-pages 2>/dev/null || true

      - name: Build
        run: npm run build

      - name: Deploy to GitHub Pages
        uses: peaceiris/actions-gh-pages@v4
        with:
          github_token: ${{ secrets.GITHUB_TOKEN }}
          publish_dir: ./dist
          force_orphan: true
          keep_files: false  # Ensure clean deployment
</file>

<file path="index.html">
<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Destroyer Clicker</title>
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/App.tsx"></script>
  </body>
</html>
</file>

<file path="package.json">
{
  "name": "destroyer-clicker",
  "version": "1.0.0",
  "scripts": {
    "dev": "vite --host 0.0.0.0",
    "build": "vite build",
    "preview": "vite preview",
    "predeploy": "npm run build",
    "deploy": "gh-pages -d dist"
  },
  "dependencies": {
    "lucide-react": "^0.562.0",
    "react": "^19.2.3",
    "react-dom": "^19.2.3"
  },
  "devDependencies": {
    "@types/react": "^19.2.7",
    "gh-pages": "^6.3.0",
    "vite": "^7.3.0"
  },
  "repository": {
    "type": "git",
    "url": "https://github.com/Nyxhexashirone/effective-broccoli.git"
  }
}
</file>

</files>
